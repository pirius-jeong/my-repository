# 7장. Multi-Agent Collaboration(다중 에이전트 협업)

## 7.1 다중 에이전트 협업 패턴 개요

- **정의**: 복잡 작업을 **전문화된 여러 에이전트 팀**으로 분해하고, **협업·통신**을 통해 해결하는 패턴이다.
- 단일 에이전트 한계: 다중 도메인·전문 지식·도구 필요 시 성능 제한.
- 강점: 모듈성(전문화), 확장성(에이전트 추가 용이), 견고성(하나 실패해도 전체 안 무너짐), **시너지 효과**(팀 성능 > 개별 합).

### 핵심 구성 요소

- **역할·책임 분리**: 각 에이전트 고유 역할·목표·도구 할당.
- **통신 프로토콜**: 표준 메시지 형식, 공유 상태(세션·메모리).
- **워크플로**: 목표 분해 → 하위 작업 할당 → 결과 교환·조정.

---

## 7.2 협업 형태

### 7.2.1 순차적 핸드오프(Sequential Hand-off)

- 한 에이전트 출력 → 다음 에이전트 입력으로 전달.
- 예: 연구 → 요약 → 보고서 작성.

### 7.2.2 병렬 처리(Parallel Processing)

- 여러 에이전트가 동시에 독립 부분 처리 → 나중 합병.
- 예: 데이터 수집 A/B/C 동시 → 종합 분석.

### 7.2.3 토론·합의(Debate & Consensus)

- 서로 다른 관점 에이전트가 토론 → 최종 합의 도출.
- 예: 옵션 평가 후 최선 선택.

### 7.2.4 계층적 구조(Hierarchical)

- **관리자 에이전트**가 작업자 에이전트에 동적 위임·조율.
- 예: 코디네이터 → 전문가 팀 배정.

### 7.2.5 전문가 팀(Expert Team)

- 도메인별 전문 에이전트(연구자·작가·편집자) 협업.
- 예: 연구 → 작성 → 검토 → 최종 출력.

### 7.2.6 비평자-리뷰어(Critic-Reviewer)

- Producer(초안 생성) → Critic(정책·정확성·품질 검토) → 수정.
- 효과: 환각·오류 감소, 윤리·준수 강화.

---

## 7.3 상호 관계·커뮤니케이션 모델

| 모델 | 특징 | 장점 | 단점 | 적합 사례 |
|------|------|------|------|-----------|
| **단일 에이전트** | 독립 작동 | 구현·관리 단순 | 기능 제한 | 단순 작업 |
| **네트워크** | 분산 직접 상호작용 | 회복력 ↑ | 통신 오버헤드 | 동적 환경 |
| **감독자** | 중앙 코디네이터 | 명확 권한 | 단일 실패 지점 | 중간 복잡도 |
| **도구로서의 감독자** | 감독자가 지원 역할 | 자율성 유지 | 병목 가능 | 전문 지원 필요 |
| **계층적** | 다층 관리 | 확장성 ↑ | 복잡도 ↑ | 대규모 조직 |
| **커스텀** | 문제 맞춤형 | 최적화 | 설계 난이도 ↑ | 특수 도메인 |

---

## 7.4 실제 응용 사례

- **연구·분석**: 연구 에이전트(검색) → 분석(통계) → 합성(보고서).
- **소프트웨어 개발**: 요구분석 → 코드 생성 → 테스트 → 문서화.
- **콘텐츠 생성**: 시장조사 → 카피라이팅 → 디자인 → 스케줄링.
- **재무 분석**: 데이터 수집 → 심리 분석 → 기술 분석 → 추천.
- **고객 지원**: 1차 지원 → 전문가 에스컬레이션.
- **공급망 최적화**: 공급자·제조·유통 에이전트 협업.
- **네트워크 복구**: 문제 분류 → 해결 → 최적 조치 제안.

---

## 7.5 구현 프레임워크 예시

### 7.5.1 CrewAI

- **에이전트 팀**: 연구원(AI 트렌드 조사) + 작성자(블로그 작성).
- **작업**: 연구_task → writing_task(연구 결과 context로).
- **Crew**: 순차 프로세스, Gemini 2.0 Flash LLM.
- 실행: `crew.kickoff()` → 협업 결과 출력.

### 7.5.2 Google ADK

- **계층적**: Coordinator(부모) → Greeter/TaskExecutor(자식).
- **순차적(SequentialAgent)**: Step1(Fetch) → Step2(Process).
- **병렬(ParallelAgent)**: WeatherFetcher + NewsFetcher 동시 → 상태 공유.
- **LoopAgent**: 조건 체크까지 반복(예: 상태 "완료"까지).
- **Agent as Tool**: 상위 에이전트가 하위 에이전트를 도구처럼 호출.

---

## 7.6 설계 고려사항

- **모듈성**: 전문화로 각 에이전트 최적화.
- **통신 오버헤드 관리**: 공유 상태·표준 프로토콜 필수.
- **실패 격리**: 한 에이전트 실패 → 전체 시스템 안정.
- **확장성**: 새 에이전트 추가 용이.
- **모델 선택**: 단일 vs 다중 → 작업 복잡도에 따라.

---

## 7.7 한눈에 보기

- **무엇**: 복잡 작업을 **전문 에이전트 팀**으로 분해·협업 해결.
- **왜**: 단일 에이전트로는 다중 도메인·전문성 부족 → 팀 시너지로 극복.
- **어떻게**: 역할 분리 + 통신(순차·병렬·계층·토론) + 프레임워크(CrewAI·ADK).
- **언제**: 연구·개발·콘텐츠·분석 등 **다양한 전문성·단계 필요** 시.

---

## 7.8 핵심 정리

- Multi-Agent Collaboration은 **단일 → 팀 지능**으로의 도약을 가능케 한다.
- 협업 형태(순차·병렬·계층 등) 선택이 시스템 성능 결정.
- CrewAI·Google ADK 등은 에이전트 팀 오케스트레이션 쉽게 구현.
